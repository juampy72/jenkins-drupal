<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Jenkins and Drupal</title>

    <meta name="description" content="Using Jenkins in Drupal projects">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section data-background-video="video/jenkins_cron.mp4" data-background-video-loop data-background-color="#000000">
          <div style="background-color: rgba(0, 0, 0, 0.8); color: #fff; padding: 20px;">
            <h2>Jenkins and Drupal</h2>
            <p>Juampy NR - @juampynr</p>
            <p>DrupalCamp Costa Rica 2015</p>
          </div>
        </section>

        <section>
          <img align="left" src="images/Juampy-headshot.jpg" width="200"/>
          <img align="right" src="images/lullabot.jpg" width="200"/>
          Juampy NR -Â <a href="https://twitter.com/juampynr" target="_blank">@juampynr</a></br>
          </br>
          Senior Developer</br></br>
          <a href="https://www.lullabot.com/who-we-are/juampy-nr" target="_blank">about.me/juampynr</a>
          </br>
          <div style="margin: 0px auto;padding-left: 200px;">
            <a href="http://www.amazon.com/Drush-Developers-Juampy-Novillo-Requena-ebook/dp/B00SYOBXYG" target="_blank"><img src="images/drush_book.jpg" width="200"/></a>
          </div>
        </section>

        <section data-background="images/background.png">
          <div style="background-color: rgba(0, 0, 0, 0.8); color: #fff; padding: 20px;">
            <h2>What is Jenkins?</h2>
            <blockquote>
              &ldquo;Jenkins is an award-winning application that monitors executions of repeated jobs,
              such as building a software project or jobs run by cron.&rdquo;
            </blockquote>
            <a href="https://wiki.jenkins-ci.org/display/JENKINS/Meet+Jenkins" target="_blank">Jenkins Wiki</a>
          </div>
        </section>

        <section>
          <section>
            <h2>Setting up Jenkins</h2>
            <ol>
              <li>Installation.</li>
              <li>Adding credentials.</li>
              <li>Adding a node.</li>
            </ol>
          </section>
          <section>
            <h2>1. Installation</h2>
            <a href="https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins" target="_blank">https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins</a>
          </section>
          <section>
            <h2>2. Adding credentials</h2>
            <img src="images/jenkins_credentials.png"/>
          </section>
          <section>
            <h2>3. Adding a node</h2>
            <img src="images/jenkins_node.png"/>
          </section>
        </section>

        <section>
          <h2>Job examples</h2>
          <ul>
            <li>Running cron.</li>
            <li>Introducing continuous integration.</li>
            <li>Downloading data from production to development</li>
            <li>Deploying a release.</li>
          </ul>
        </section>

        <section>
          <section>
            <h2>Running cron</h2>
            <img src="images/new_job_cron.png"/>
          </section>
          <section>
            <h2>Running cron - setting the node</h2>
            <img src="images/job_node.png"/>
          </section>
          <section>
            <h2>Running cron - frequency</h2>
            <img src="images/cron_frequency.png"/>
          </section>
          <section>
            <h2>Running cron - do it!</h2>
            <img src="images/cron_shell_step.png"/>
          </section>
          <section>
            <h2>Running cron - notifications</h2>
            <img src="images/notifications.png"/>
          </section>
          <section>
            <h2>Running cron - overview</h2>
            <img src="images/job_overview.png"/>
          </section>
        </section>

        <section>
          <section data-background="images/ci_background.png">
            <div style="background-color: rgba(0, 0, 0, 0.8); color: #fff; padding: 20px;">
              <h2>Introducing Continuous Integration</h2>
              <blockquote>
                Continuous integration (CI) is the practice, in software engineering, of merging all
                developer working copies with a shared mainline several times a day.
              </blockquote>
              <a href="https://en.wikipedia.org/wiki/Continuous_integration" target="_blank">Wikipedia</a>
            </div>
          </section>
          <section>
            <h2>CI - Watching master branch</h2>
            <img src="images/scm_master.png"/>
          </section>
          <section>
            <h2>CI - Triggering on git push</h2>
            <img src="images/ci_trigger.png"/>
          </section>
          <section>
            <h2>CI - Execute shell script</h2>
            <img src="images/ci_shell.png"/>
          </section>
          <section data-background-video="video/merge_job.mp4" data-background-video-loop data-background-color="#000000">
          </section>
        </section>

        <section>
          <section data-background="images/jenkins_downsync.png">
            <div style="background-color: rgba(0, 0, 0, 0.8); color: #fff; padding: 20px;">
              <h2>Downloading data from Production to Development (Downsync)</h2>
            </div>
          </section>
          <section>
            <h2>Downsync - Testing access from source to target</h2>
            <pre>
              <code>
juampy@juampy-box:~ $ ssh dev.example.com
juampy@dev:~$ sudo su jenkins
jenkins@dev:/home/juampy$ cd /var/www/edit.example/docroot
jenkins@dev:/var/www/edit.example.com/docroot$ drush @lullabot.prod status
 Drupal version                  :  7.38                                                                                                              
 Site URI                        :  http://edit.lullabot.com                                                                                          
 Database driver                 :  mysql                                                                                                             
 Drupal bootstrap                :  Successful                                                                                                        
 Drupal user                     :  Anonymous                                                                                                         
 Site path                       :  sites/default                                                                                                     
 File directory path             :  sites/default/files                                                                                               
 Temporary file directory path   :  /tmp               
jenkins@dev:/var/www/edit.example.com/docroot$ drush @lullabot.prod status
jenkins@dev:/var/www/edit.example.com/docroot$ exit
exit
juampy@dev:~$ exit
logout
Connection to dev.example.com closed.
              </code>
            </pre>
          </section>
          <section>
            <h2>Downsync - Avoiding collisions between jobs</h2>
            <img src="images/jenkins_block.png"/>
          </section>
          <section>
            <h2>CI - Execute shell script</h2>
            <img src="images/downsync_shell.png"/>
          </section>
        </section>

        <section>
          <section data-background="images/jenkins-deploy.png">
            <div style="background-color: rgba(0, 0, 0, 0.8); color: #fff; padding: 20px;">
              <h2>Deploying releases</h2>
            </div>
          </section>
          <section>
            <h2>Deployments - Adding parameters</h2>
            <img src="images/deploy_param.png"/>
          </section>
          <section>
            <h2>Deployments - Shell script</h2>
            <img src="images/deployment_shell.png"/>
          </section>
        </section>

        <section>
          <h2>Alternative ways to trigger jobs</h2>
          <ul>
            <li>Manual trigger.</li>
            <li>Jenkins IRC bot.</li>
            <li>When another job finishes.</li>
            <li>When a certain comment is made in GitHub.</li>
          </ul>
        </section>

        <section>
          <h2>Resources</h2>
          <ul>
            <li><a href="https://wiki.jenkins-ci.org/display/JENKINS/Plugins#Plugins-Pluginsbytopic" target="_blank">List of plugins by topic</a></li>
            <li><a href="https://www.lullabot.com/articles/github-pull-request-builder-for-drupal" target="_blank">GitHub Pull Request builder for Drupal</a> - <a href="https://amsterdam2014.drupal.org/session/github-pull-request-builder-drupal.html" target="_blank">video</a></li>
            <li><a href="http://www.amazon.com/Developers-Edition-Juampy-Novillo-Requena/dp/1784393789" target="_blank">Drush for Developers book</a></li>
          </ul>
        </section>

        <section>
          <h2>Thanks! Questions?</h2>
          <p>
            <img align="left" src="images/Juampy-headshot.jpg" width="200"/>
            <img align="right" src="images/lullabot.jpg" width="200"/>
            <a href="https://twitter.com/juampynr" target="_blank">@juampynr</a>
            <br/>
            <br/>
            <a href="http://about.me/juampynr" target="_blank">about.me/juampynr</a>
            <br/>
            <br/>
            Lullabot is looking for projects!
          </p>
        </section>
      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true },
          { src: 'plugin/notes/notes.js', async: true }
        ],
        keyboard: {
          39: 'next',
          37: 'prev'
        }
      });

    </script>

  </body>
</html>
